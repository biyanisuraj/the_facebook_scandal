\documentclass[12pt, twoside]{report}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
%%\usepackage[us]{babel}
\usepackage{helvet}
\usepackage[a4paper,width=180mm,top=25mm,bottom=25mm,bindingoffset=6mm]{geometry}
\usepackage[framemethod=default]{mdframed}
\usepackage{lipsum,titlesec,xcolor,fancyhdr,array,multicol,float,graphicx,wrapfig,subcaption}
\usepackage{fontspec,todonotes,enumitem,comment,capt-of,amsmath,booktabs}
\usepackage[colorlinks]{hyperref}
\usepackage[font=scriptsize]{caption}
\usepackage[sorting=none]{biblatex}
\addbibresource{references.bib}

\DeclareCaptionLabelFormat{andtable}{#1˜#2 \& \tablename˜\thetable}

\renewcommand{\familydefault}{\sfdefault}

\graphicspath{{images/}}

%% define size for chapter initial page:
\usepackage{titlesec, blindtext, color}
\definecolor{gray75}{gray}{0.75}
\newcommand{\hsp}{\hspace{20pt}}
\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}

\titlespacing*{\chapter}{0pt}{-60pt}{20pt} %% change spacing
%%%%%%%%%%

\floatstyle{plain}
\restylefloat{figure}

\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{ \markboth{#1}{} }
\renewcommand{\sectionmark}[1]{ \markright{#1}{} }
\fancyhead[LE]{\itshape{ \fontsize{10}{12} \selectfont \leftmark}}
\fancyhead[RE, LO]{\thepage}
\fancyhead[RO]{\itshape{\fontsize{10}{12} \selectfont \rightmark}}
\renewcommand\headrulewidth{0pt}

 \hypersetup{
     colorlinks,
     citecolor= green,
     filecolor=black,
     linkcolor= black,
     urlcolor=blue
 }


\begin{document}
    \input{titlepage}
    \pagenumbering{Roman}
    \tableofcontents
    \chapter{The case story}
    \pagenumbering{arabic}

On Saturday 17 of March 2018, the newspapers The Observer and The New York Times broke reports on how the consulting firm Cambridge Analytica harvested private information from the Facebook profiles of more than 50 million users without their permission, making it one of the largest data leaks in the social network’s history. \cite{nyt_17march}. REF OBSERVER

The whistleblower Christopher Wylie, datascientist and former director of research at Cambridge Analytica revealed...
Cambridge Analytica described itself as a company providing consumer research, targeted advertising and other data-related services to both political and corporate clients.

What, Where, Who, Why, Where ?


Timeline da sistemare: \cite{nyt_timeline}
\begin{itemize}

\item March 17, 2018: The Observer and The New York Times publish joint reports on data harvesting by Cambridge Analytica. UK Information Commissioner Elizabeth Denham issues statement that they are “investigating circumstances in which Facebook data may have been illegally acquired and used.” Politicians in US and UK call for investigation.

\item March 19, 2018: Channel 4 News publishes part 1 of their undercover investigation into Cambridge Analytica. Facebook sends investigators to Cambridge Analytica’s offices. UK Information Commissioner orders them to stand down.

\item March 20, 2018: Channel 4 News publishes part 2 of their undercover investigation into Cambridge Analytica, where they boast about getting Donald Trump elected. British MP Damian Collins calls on Facebook to present oral evidence on Cambridge Analytica. Facebook agrees to send former operations manager Sandy Parakilas. Facebook holds internal Q\&A with attorney Paul Grewal to discuss the crisis, but CEO Mark Zuckerberg and COO Sheryl Sandberg do not attend. Cambridge Analytica suspends CEO Alexander Nix. Facebook demands to inspect Christopher Wylie’s phone. FTC opens investigation into Facebook.
\item to be continued...
\end{itemize}

    \chapter{Building the network}

    \begin{figure}[htbp]
      \centering
\includegraphics[width=\textwidth]{../../scripts/visualization/imgs/time_history.pdf}
      \caption{New authors time history}
      \label{fig:time_history}
    \end{figure}


    \chapter{Network properties}

 \section{Degree distribution}    
    \begin{figure}[htbp]
      \centering
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/degree_distributions_nobinlog.pdf}            
      \caption{New authors time history}
      \label{fig:degree}
    \end{figure}

\begin{comment}
    \begin{figure}[htbp]
      \centering
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/degree_distributions.pdf}            
      \caption{New authors time history}
      \label{fig:degree}
    \end{figure}
\end{comment}

\begin{minipage}[b]{0.5\textwidth}
   \centering
    \begin{figure}[H]
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/degree_distributions.pdf}            
          \caption{}
        \label{fig:in_degree}
\end{figure}
\end{minipage}
\begin{minipage}[b]{0.5\textwidth}
  \begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/tot_degree_distribution.pdf}            
        \caption{}
\label{fig:out_degree}
\end{figure}
\end{minipage}

    
\begin{minipage}[b]{0.5\textwidth}
   \centering
    \begin{figure}[H]
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/in_degree_distribution.pdf}            
          \caption{}
        \label{fig:in_degree}
\end{figure}
\end{minipage}
\begin{minipage}[b]{0.5\textwidth}
  \begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/out_degree_distribution.pdf}            
        \caption{}
\label{fig:out_degree}
\end{figure}
\end{minipage}
    


    \subsection{Random graphs} 
    In order to generate an Erdos-Renyi random network we have choosen a ``linking probability'' p using the average degree of the original undirected network, by using eq. \ref{eq:ER_probability}.
    \begin{equation}
      p_{ER} \approx \frac{\langle k  \rangle}{N} = \frac{57}{65729} \approx  0.001
      \label{eq:ER_probability}
    \end{equation}

    Each new node of the random network generated with the Barabasi-Albert model has been attached to the other nodes with a number of links $m$ equal to the average degree of the original network, considered undirected:
    \begin{equation}
      m = 2 \, \langle k \rangle = 76
      \label{eq:BA_model}
    \end{equation}

    
    \begin{figure}[htbp]
      \centering
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/connectivity.pdf}            
      \caption{Connect components}
      \label{fig:connectivity}
    \end{figure}

    \clearpage
    \section{Path analysis}
    In order to exactly estimate the average path length $\langle d \rangle$ it would be necessary to compute all the node-node distances of the network. These procedure results infeasible with the computation resources available, as shown in Fig. \ref{fig:path_time}.
    In real networks the path length distribution is quite close to a normal distribution, as shown in \cite{ye_paths}. The average path length has then been estimated statistically, random sampling a number $n$ of node pairs, sufficient to achieve a narrow confidence interval for the mean. The assumption of normality of the distribution it is strong, but not necessary. The convergence of the computed mean to the expected value is guaranteed by the central limit theorem with the assumptions that the distances are independent, identically distributed, and with finite variance.
    The average path length has been estimated by the average of the distances $D_i$ for each sampled node pair, and computing its standard deviation:
    \begin{equation}
      \langle d \rangle = \frac{\sum D_i}{n} \; , \; \sigma(\langle d \rangle) = \frac{s}{\sqrt{n}}
    \end{equation}


    
\begin{minipage}[b]{0.5\textwidth}
   \centering
    \begin{figure}[H]
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/paths_computation_time.pdf}            
          \caption{Shortest paths computation time by number of pairs}
      \label{fig:path_time}
\end{figure}
\end{minipage}
\begin{minipage}[b]{0.5\textwidth}
  \begin{figure}[H]
  \centering
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/paths_hist.pdf}            
        \caption{Shortest paths distribution}
\end{figure}
\end{minipage}

    
    \begin{figure}[htbp]
      \centering
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/paths_hist_comparison.pdf}            
      \caption{Shortest paths distributions comparison between the original largest connected component and a random network with degree preservation.}
      \label{fig:path_comparison}
    \end{figure}



\begin{minipage}[b]{0.5\textwidth}
   \centering
    \begin{figure}[H]
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/cluster_coef_hist.pdf}            
          \caption{Clustering coefficient distribution}
      \label{fig:path_time}
\end{figure}
\end{minipage}
\begin{minipage}[b]{0.5\textwidth}
  \begin{figure}[H]
  \centering
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/cluster_coef_bydegree.pdf}            
      \caption{Clustering coefficients as function of the degree}
\end{figure}
\end{minipage}

\clearpage
\section{Hubs analysis}

The hubs of the crawled social network of tweets authors about the Cambridge Analytica-Facebook scandal are mainly
news mass media, as expected. In Fig. \ref{fig:hubs_followers} the 30 biggest hubs are represented by indicating
the in-degree of the crawled network, corresponding to the number of authors following the hub, versus the actual total
number of followers on Twitter.
The "The New York Times" is the biggest hub, with the maximum number of both in-degree and number of followers.
We observe that there is an obvious positive correlation between in-degree and followers, with some variations.
In particular, let's take a pair of hubs having similar followers count, such as the "Washington Post" and the "Huffington Post".
The "Washington Post" has a larger in-degree than the second.
This difference can be interpreted as a larger interest in the scandal from the people following the "Washington Post'' respect 
to the ones following the "Huffington Post".
We can define a quantity to measure this interest:

\begin{equation}
  \text{Interest} \equiv \frac{ \text{in-degree} }{\text{\#followers}}
  \label{eq:interest}
\end{equation}

This measure represents the percentage of followers that being interested in the scandal had published a tweet about the subject.
%%It is also a measure of density, being the analyzed network a sub-network of the overall Twitter network: 



    \begin{figure}[htbp]
      \centering
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/hubs_followers.pdf}            
      \caption{}
      \label{fig:hubs_followers}
    \end{figure}

    \begin{figure}[htbp]
      \centering
      \includegraphics[width=\textwidth]{../../scripts/visualization/imgs/hubs_interest.pdf}            
      \caption{}
%      \label{fig:path_comparison}
    \end{figure}
    


    \chapter{Network dynamics}

    \include{chaps/communities/communities}

    \include{chaps/spreading/spreading}

    \chapter{Summary}


\printbibliography[title={References}]


\end{document}
